{% extends 'admin/model/list.html' %}

{% macro render_date(model, column) %}
    {{ model.datetime|string|truncate(16, true, "") }}
{% endmacro %}

{% macro render_content(model, column) %}
    <strong>{{ model.content }}</strong>
{% endmacro %}

{% macro render_responses(model, column) %}
    {% for response in model.responses %}
        <div class="response">
            {{ response.datetime|string|truncate(16, true, "") }}
        <span class="pull-right label"><i class="icon-user icon-white"></i>
            {% if response.user %}
                {{ response.user.email }}
            {% else %}
                system
            {% endif %}
        </span><br>
            <em>{{ response.content }}</em>
        </div>
    {% endfor %}
    <a class="btn btn-small btn-new-response pull-right" href="#response-modal" data-toggle="modal">
        <i class="icon-plus"></i> new response
    </a>
{% endmacro %}

{% block body %}
    {{ super() }}

    <!-- Modal for sending responses -->
    <div id="response-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="response-modal-label" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3 id="response-modal-label">SMS response</h3>
        </div>
        <div class="modal-body">
                <form id="response-form">
                    <fieldset>
                        <label class="pull-left">Message (max length 140 chars)</label>
                        <textarea rows="5" class="input-xlarge" maxlength="140"></textarea>
                        {#                    <span class="help-block">Example block-level help text here.</span>#}
                    </fieldset>
                </form>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
            <button class="btn btn-primary">Send</button>
        </div>
    </div>
{% endblock %}